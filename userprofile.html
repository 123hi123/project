<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>使用者資訊</title>
    <link rel="stylesheet" href="styles/userprofile.css">
    <link rel="stylesheet" href="styles/header.css">
</head>
<body>
    <div class="header">
        <div class="header-container">
            <div class="header-left">
                <a href="home.html">
                    <img class="logo-icon" src="icons/logo.png">
                </a>
            </div>
            
            <div class="header-right">
                <div class="search">
                    <input class="search-input" placeholder="搜尋">
                    <button class="search-button" onclick="getProductsInformations()">
                        <img class="search-icon" src="icons/search.svg">
                    </button>
                </div>
                <div class="cart">
                    <a href="checkout.html">
                        <img class="cart-icon" src="icons/cart.png">
                    </a>
                    <p class="cart-num">0</p>
                </div>
                <div class="user">
                    <button id="user-btn" onclick="handleLogoutUserButtonClick()">
                        <img id="user-icon" src="icons/login.png">
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="user-profile">
            <h2>🙋‍♂️ 我的資訊</h2>
            <div class="profile-content">
                <div class="card user-info-card">
                    <h3>👤 個人資料</h3>
                    <div id="userInfo">
                        <p><strong>賬號:</strong> <span id="userAccount">載入中...</span></p>
                        <p><strong>密碼:</strong> <span id="passwordDisplay">********</span></p>
                        <p><strong>姓名:</strong> <span id="nameDisplay">載入中...</span></p>
                        <p><strong>電子信箱:</strong> <span id="emailDisplay">載入中...</span></p>
                        <p><strong>地址:</strong> <span id="addressDisplay">載入中...</span></p>
                        <p><strong>電話:</strong> <span id="phoneDisplay">載入中...</span></p>
                        <p><strong>性別:</strong> <span id="sexDisplay">載入中...</span></p>
                    </div>
                    <div id="userInfoEdit" style="display: none;">
                        <p><strong>賬號:</strong> <span id="userAccountEdit"></span></p>
                        <p>
                            <strong>密碼:</strong>
                            <input type="password" id="userPassword">
                            <button type="button" id="togglePassword" style="display: none;">顯示密碼</button>
                            <span class="error-message" id="passwordError" style="display: none;"></span>
                        </p>
                        <p>
                            <strong>姓名:</strong> <input type="text" id="userName">
                            <span class="error-message" id="nameError" style="display: none;"></span>
                        </p>
                        <p>
                            <strong>電子信箱:</strong> <input type="email" id="userEmail">
                            <span class="error-message" id="emailError" style="display: none;"></span>
                        </p>
                        <p>
                            <strong>地址:</strong> <input type="text" id="userAddress">
                            <span class="error-message" id="addressError" style="display: none;"></span>
                        </p>
                        <p>
                            <strong>電話:</strong> <input type="tel" id="userPhone">
                            <span class="error-message" id="phoneError" style="display: none;"></span>
                        </p>
                        <p>
                            <strong>性別:</strong> 
                            <select id="userSex">
                                <option value="男性">男性</option>
                                <option value="女性">女性</option>
                                <option value="其他">其他</option>
                            </select>
                        </p>
                    </div>
                    <button id="editUserInfoBtn" onclick="toggleEditMode()">編輯資料</button>
                    <button id="saveUserInfoBtn" onclick="saveUserChanges()" style="display: none;">儲存更改</button>
                    <button id="cancelUserInfoBtn" onclick="cancelChanges()" style="display: none;">取消更改</button>
                </div>
                <div class="card credit-card-info-card">
                    <h3>💳 信用卡資訊</h3>
                    <ul id="creditCardList" class="credit-card-list">
                        <!-- Credit cards will be dynamically added here by JavaScript -->
                    </ul>
                    <div class="add-card-form">
                        <input type="text" id="newCardNumber" placeholder="新卡號">
                        <input type="text" id="newCardCVV" placeholder="新CVV">
                        <button id="addCardButton" onclick="addCard()">新增信用卡</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for old password verification -->
    <div id="passwordVerificationModal" class="modal">
        <div class="modal-content">
            <h3>驗證密碼</h3>
            <p>為了安全起見，請輸入密碼以確認身份：</p>
            <input type="text" id="oldPasswordInput">
            <!-- <button type="button" id="toggleOldPassword">顯示/隱藏密碼</button> -->
            <button onclick="verifyOldPassword()">確認</button>
            <button onclick="closePasswordVerificationModal()">取消</button>
        </div>
    </div>
    <script src="scripts/userprofile.js"></script>
</body>
</html>
